@startuml
title Full System Flow with Cache-Aside and Write Invalidation

actor User
entity Frontend
entity Backend
database Redis
database MySQL


group User submits a complaint (Write Path)
    User -> Frontend: fill employee form
    activate Frontend
        Frontend -> Frontend: validate input
        alt invalid
            Frontend --> User: prompt re-entry
        else valid
            Frontend -> Backend: POST /api/v1/employees
            activate Backend
                Backend -> MySQL: INSERT INTO
                Backend -> Redis: DEL invalidate cache
        end


    Backend --> Frontend: Created
            deactivate Backend
    
    Frontend --> User: confirmation message
    deactivate Frontend
    
end group

group User views employees (Read Path)
    User -> Frontend: navigate to employees view
    activate Frontend
        Frontend -> Backend: GET /api/v1/employees


    activate Backend
        Backend -> Redis: GET employees:<name>
        alt cache hit
            Redis --> Backend: cached data
        else cache miss
            Redis --> Backend: null
            Backend -> MySQL: SELECT 
            MySQL --> Backend: fresh data
            Backend -> Redis: SET employees fresh data
        end

    Backend --> Frontend: employee list JSON

    deactivate Backend
        Frontend --> User: render employee list
    deactivate Frontend
end group

@enduml
